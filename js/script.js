"use strict";$(function(){function e(e){var n=e.autoPlay||!1,t=e.autoPlaySpeed||1e3,i=$(e.slider),r=$(i).find(".controls").get(0);function a(e){var n,t,a,o=e||$(i).find(".intro__slide.active"),l=$(o).find(".intro__slide-content").html(),s=$(i).find(".intro__content"),c=$(o).data("link"),d=$(o).find(".intro__slide-alt").html(),_=$(i).find(".intro__alt");$(i).find(".intro__slide.active").removeClass("active"),$(o).addClass("active"),$(s).addClass("change").html(l),$(i).find(".intro__more").attr("href",c),$(_).addClass("change"),n=$(r).find(".controls__count"),t=$(i).find(".intro__slide").length,a=$(i).find(".intro__slide.active").index()+1,$(n).text(a+" / "+t).addClass("change"),setTimeout(function(){$(n).removeClass("change")},100),setTimeout(function(){$(_).removeClass("change").empty().append(d);var e=$(_).find(".gallery").get(0);e&&$(e).find(".gallery__slides").slick({infinite:!0,autoplay:3e3,slidesToShow:1,arrows:!0,fade:!0,prevArrow:$(".controls_gallery .controls__arrow_prev"),nextArrow:$(".controls_gallery .controls__arrow_next")})},500),setTimeout(function(){$(s).removeClass("change")},300)}$(i).find(".intro__slide").first().addClass("active"),a(),$(i).find(".controls__arrow").on("click",function(){switch($(this).hasClass("controls__arrow_next")){case!0:a(void 0==$(i).find(".intro__slide.active").next().get(0)?$(i).find(".intro__slide").first().get(0):$(i).find(".intro__slide.active").next().get(0));break;case!1:a(void 0===$(i).find(".intro__slide.active").prev().get(0)?$(i).find(".intro__slide").last():$(i).find(".intro__slide.active").prev().get(0))}}),n&&setInterval(function(){$(r).find(".controls__arrow_next").trigger("click")},t)}var n;if(e({slider:$('[data-slider="intro"]'),autoPlay:!0,autoPlaySpeed:5e3}),e({slider:$('[data-slider="specialists"]')}),function(){function e(){var e=$(".brands__list").children().length+1,n=$(".brand.slick-current"),t=$(n).index()+1,i=$(n).data("image"),r=$(".brands__image");1===String(e).length&&(e="0"+e),1===String(t).length&&(t="0"+t),$(".brands__count span").first().text(t),$(".brands__count span").last().text(e),$(r).addClass("change"),setTimeout(function(){$(r).css({"background-image":"url("+i+")"}),$(r).removeClass("change")},100)}$(".brands__list").slick({infinite:!0,fade:!0,arrows:!0,prevArrow:$(".controls_brands .controls__arrow_prev"),nextArrow:$(".controls_brands .controls__arrow_next")}),$(".controls_brands .controls__arrow").on("click",e),e()}(),$(".gallery").each(function(e,n){if(!$(n).hasClass("gallery_spec")){$(n).find(".gallery__slides").slick({infinite:!0,autoplay:3e3,slidesToShow:1,arrows:!0,fade:!0,prevArrow:$(".controls_gallery .controls__arrow_prev"),nextArrow:$(".controls_gallery .controls__arrow_next")});var t=$(n).find(".gallery__title").get(0);t&&(i($(n).find(".slick-current").data("title")),$(n).find(".gallery__slides").on("beforeChange",function(e,t,r,a){var o=a,l=$(n).find(".gallery__item").get(o);i($(l).data("title"))}))}function i(e){$(t).fadeOut(150,function(){$(this).html(e).fadeIn(150)})}}),$(".slider").each(function(e,n){var t=$(n).find(".slider__list");t.slick({variableWidth:!0,centerMode:!0,arrows:!0,prevArrow:$(n).find(".controls__arrow_prev"),nextArrow:$(n).find(".controls__arrow_next")});var i=$(n).data("bigimg");if(i){var r=$("."+i).get(0);$(r).html($(t).find(".slick-current img").clone()),$(t).on(".slider__item").on("click",function(e){e.preventDefault();var n=$(this).find("img").clone();$(r).empty().html(n)})}}),$("[data-bpopup]").on("click",function(e){e.preventDefault();var n=$(this).find("img").clone(),t='<div class="bpopup-wrap-image"></div>';$("body").append(t),$(t).append(n).bPopup().reposition(300)}),$("#map").get(0)){var t,i;ymaps.ready(function(){t=new ymaps.Map("map",{center:[53.334136,83.793247],zoom:17,controls:[]}),i=new ymaps.Placemark([53.334136,83.793247],{hintContent:"ТД Ultra"}),t.geoObjects.add(i)})}$("select").niceSelect(),$(".menu").on("click",function(){$(this).parent().toggleClass("menu-open")}),$("[data-open]").on("click",function(e){e.preventDefault();var n=$('[data-modal="'+$(this).data("open")+'"]').get(0);$(n).bPopup({closeClass:"modal__close"})}),n=$(".search"),$(".search__btn").on("click",function(){$(window).width()>768||($(n).toggleClass("search-open"),$(n).find("input").focus())}),$(".search__clear").on("click",function(){$(n).find(".search__field input").val("").focus()}),$(".result__compare").twentytwenty({before_label:"До",after_label:"После"}),$(".sertificate").tilt()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyIkIiwiaW50cm9TbGlkZXIiLCJkYXRhIiwiYXV0b1BsYXlTbGlkZXMiLCJhdXRvUGxheSIsImF1dG9QbGF5U2xpZGVzU3BlZWQiLCJhdXRvUGxheVNwZWVkIiwic2xpZGVyIiwiY29udHJvbHMiLCJhY3RpdmVDb250ZW50Iiwic2xpZGUiLCJjb3VudCIsInNsaWRlcyIsImFjdGl2ZSIsImZpbmQiLCJjb250ZW50U2xpZGUiLCJodG1sIiwiY29udGVudCIsImxpbmsiLCJhbHRTbGlkZSIsImFsdCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJhdHRyIiwibGVuZ3RoIiwiaW5kZXgiLCJzZXRUaW1lb3V0IiwidGV4dCIsImVtcHR5IiwiYXBwZW5kIiwiZ2V0IiwiZ2FsbGVyeSIsInNsaWNrIiwiaW5maW5pdGUiLCJhdXRvcGxheSIsInNsaWRlc1RvU2hvdyIsImFycm93cyIsImZhZGUiLCJmaXJzdCIsInRoaXMiLCJoYXNDbGFzcyIsInVuZGVmaW5lZCIsIm5leHQiLCJuZXh0U2xpZGUiLCJwcmV2IiwibGFzdCIsInNldEludGVydmFsIiwic2Vjb25kcyIsInRyaWdnZXIiLCJzZWFyY2giLCJteU1hcCIsInJlZnJlc2giLCJicmFuZHNTbGlkZXIiLCJjaGlsZHJlbiIsImN1cnJlbnQiLCJpbWciLCJpbWFnZSIsIlN0cmluZyIsImNzcyIsIm9uIiwiZWFjaCIsImkiLCJ0aXRsZXMiLCJ0aXRsZVNldHVwIiwidGl0bGUiLCJlIiwiY3VycmVudFNsaWRlIiwiZGVsYXkiLCJmYWRlSW4iLCJzbCIsInZhcmlhYmxlV2lkdGgiLCJjZW50ZXJNb2RlIiwicHJldkFycm93IiwibmV4dEFycm93IiwiYmlnSW1nIiwiYmlnIiwiY2xvbmUiLCJwcmV2ZW50RGVmYXVsdCIsImltZ1dyYXAiLCJiUG9wdXAiLCJyZXBvc2l0aW9uIiwibXlQbGFjZW1hcmsiLCJjZW50ZXIiLCJoaW50Q29udGVudCIsInltYXBzIiwiTWFwIiwiem9vbSIsImdlb09iamVjdHMiLCJyZWFkeSIsIlBsYWNlbWFyayIsImFkZCIsInBhcmVudCIsInRvZ2dsZUNsYXNzIiwiY2xvc2VDbGFzcyIsIm1vZGFsIiwid2lkdGgiLCJmb2N1cyIsInZhbCIsInR3ZW50eXR3ZW50eSIsImJlZm9yZV9sYWJlbCIsImFmdGVyX2xhYmVsIiwidGlsdCJdLCJtYXBwaW5ncyI6ImFBQUFBLEVBQUUsV0FHRCxTQUFTQyxFQUFZQyxHQURyQixJQUFBQyxFQUFBRCxFQUFBRSxXQUFBLEVBQ0FDLEVBQXFCSCxFQUFNSSxlQUFBLElBQzFCQyxFQUFJSixFQUFBQSxFQUFBQSxRQUFKSyxFQUNDSCxFQUFBQSxHQUFBQSxLQUFzQkgsYUFBS0ksSUFBTCxHQW1DdkIsU0FBU0csRUFBY0MsR0FEdkIsSUF4QkFDLEVBQ0FDLEVBQ0NDLEVBc0JEQSxFQUFBSCxHQUFBVixFQUFBTyxHQUFBTyxLQUFBLHdCQUNBQyxFQUFTTixFQUFBQSxHQUFjQyxLQUFPLHlCQUFBTSxPQUM3QkMsRUFBSUosRUFBVUgsR0FBU0EsS0FBVixtQkFBYlEsRUFDQ0gsRUFBQUEsR0FBQUEsS0FBaUJGLFFBRGxCTSxFQUVDRixFQUFVakIsR0FBQWMsS0FBVUEscUJBRnJCRSxPQUFBSSxFQUdDRixFQUFBQSxHQUFTTCxLQUFRWCxlQUhsQkYsRUFBQU8sR0FLT1AsS0FBRU8sd0JBTFRjLFlBQUEsVUFRQXJCLEVBQUVhLEdBQVFTLFNBQVMsVUFBbkJ0QixFQUFFYSxHQUFRUyxTQUFTLFVBQW5CTixLQUFBRCxHQUdBZixFQUFFTyxHQUFRTyxLQUFLLGdCQUFnQlMsS0FBSyxPQUFRTCxHQUE1Q2xCLEVBQUVPLEdBQUFBLFNBQWEsVUFyQ2hCSSxFQUFBWCxFQUFBUSxHQUFBTSxLQUFBLG9CQUNBRixFQUFTRCxFQUFBQSxHQUFRRyxLQUFBLGlCQUFBVSxPQUNoQlgsRUFBSUYsRUFBUVgsR0FBRVEsS0FBVU0sd0JBQXhCVyxRQUFBLEVBQUF6QixFQUFBVyxHQUVDRSxLQUFTYixFQUFBLE1BQUFZLEdBQWVVLFNBQUEsVUFHekJJLFdB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UUFBUTZCLE9BQU9pRCxHQUNqQjlFLEVBQUU4RSxHQUFTakQsT0FBTzBCLEdBQUt3QixTQUFTQyxXQUFXLE9BUW5DaEYsRUFBQSxRQUFBOEIsSUFBQSxHQU9Eb0IsQ0FBQUEsSUFHSTFDLEVBSEp5RSxFQUNJQyxNQUFBQSxNQUtKRCxXQUNJRSxFQUFhLElBQUFDLE1BQUFDLElBQUEsT0FEakJILFFBQUEsVUFBQSxXQUpJSSxLQUFNLEdBUUpDLGNBaEJQQyxFQUFOLElBQUFKLE1BQUFLLFdBQUEsVUFBQSxZQWFXTixZQUFhLGFBR2pCakMsRUFBTXFDLFdBQVdHLElBQUlULEtBUTdCakYsRUFBRSxVQUFTMkQsYUFBWDNELEVBQUUsU0FBUzJELEdBQUcsUUFBUyxXQUl2QjNELEVBQUF1QyxNQUFBb0QsU0FBQUMsWUFBQSxlQUlDNUYsRUFBQSxlQUFjMkQsR0FBQSxRQUFBLFNBQWtCTSxHQUZoQ0EsRUFBRVksaUJBS0RnQixJQUFBQSxFQUFBQSxFQUFZLGdCQUFBN0YsRUFBQXVDLE1BQUFyQyxLQUFBLFFBQUEsTUFBQTRCLElBQUEsR0FOZDlCLEVBQUE4RixHQUFBZixRQU1FYyxXQUFZLG1CQVdaNUMsRUFBSWpELEVBQVUrRixXQUVkL0YsRUFBQUEsZ0JBQVU0RixHQUFBQSxRQUFZLFdBQ3BCM0MsRUFBQUEsUUFBRjhDLFFBQXdCQyxNQUR4QmhHLEVBQUVpRCxHQUFRMkMsWUFBWSxlQUl2QjVGLEVBQUVpRCxHQUFBbkMsS0FBQSxTQUFxQmtGLFdBR3ZCaEcsRUFBQSxrQkFBQTJELEdBQUEsUUFBQSxXQUZDM0QsRUFBRWlELEdBQVFuQyxLQUFLLHdCQUF3Qm1GLElBQUksSUFBSUQsVUFLZGhHLEVBQW5DLG9CQUFBa0csY0FDQ0MsYUFBYyxLQUlmQyxZQUFBLFVBQ0FwRyxFQUFFLGdCQUFnQnFHIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZnVuY3Rpb24oKSB7XG5cblx0Ly8g0JPQu9Cw0LLQvdGL0Lkg0YHQu9Cw0LnQtNC10YAgXG5cdGZ1bmN0aW9uIGludHJvU2xpZGVyKGRhdGEpIHtcblx0XHR2YXIgYXV0b1BsYXlTbGlkZXMgPSBkYXRhLmF1dG9QbGF5IHx8IGZhbHNlLFxuXHRcdFx0YXV0b1BsYXlTbGlkZXNTcGVlZCA9IGRhdGEuYXV0b1BsYXlTcGVlZCB8fCAxMDAwLFxuXHRcdFx0c2xpZGVyID0gJChkYXRhLnNsaWRlciksXG5cdFx0XHRjb250cm9scyA9ICQoc2xpZGVyKS5maW5kKCcuY29udHJvbHMnKS5nZXQoMCk7XG5cblx0XHRmdW5jdGlvbiBhdXRvUGxheShzZWNvbmRzKSB7XG5cdFx0XHRzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcblx0XHRcdFx0JChjb250cm9scykuZmluZCgnLmNvbnRyb2xzX19hcnJvd19uZXh0JykudHJpZ2dlcignY2xpY2snKTtcblx0XHRcdH0sIHNlY29uZHMpO1xuXHRcdH1cblxuXHRcdC8vINCh0YfRkdGC0YfQuNC6INGB0LvQsNC50LTQvtCyXG5cdFx0ZnVuY3Rpb24gY291bnQoKSB7XG5cdFx0XHR2YXIgY291bnQgPSAkKGNvbnRyb2xzKS5maW5kKCcuY29udHJvbHNfX2NvdW50JyksXG5cdFx0XHRcdHNsaWRlcyA9ICQoc2xpZGVyKS5maW5kKCcuaW50cm9fX3NsaWRlJykubGVuZ3RoLFxuXHRcdFx0XHRhY3RpdmUgPSAkKHNsaWRlcikuZmluZCgnLmludHJvX19zbGlkZS5hY3RpdmUnKS5pbmRleCgpKzE7XG5cblx0XHRcdCQoY291bnQpLnRleHQoYWN0aXZlKycgLyAnK3NsaWRlcykuYWRkQ2xhc3MoJ2NoYW5nZScpO1xuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0JChjb3VudCkucmVtb3ZlQ2xhc3MoJ2NoYW5nZScpO1xuXHRcdFx0fSwgMTAwKVxuXHRcdH1cblxuXHRcdC8vINCh0LvQtdC00YPRjtGJ0LjQuSDRgdC70LDQudC0XG5cdFx0ZnVuY3Rpb24gbmV4dFNsaWRlKCkge1xuXHRcdFx0dmFyIG5leHQgPSAoJChzbGlkZXIpLmZpbmQoJy5pbnRyb19fc2xpZGUuYWN0aXZlJykubmV4dCgpLmdldCgwKSA9PSB1bmRlZmluZWQpID8gJChzbGlkZXIpLmZpbmQoJy5pbnRyb19fc2xpZGUnKS5maXJzdCgpLmdldCgwKSA6ICQoc2xpZGVyKS5maW5kKCcuaW50cm9fX3NsaWRlLmFjdGl2ZScpLm5leHQoKS5nZXQoMCk7XG5cdFx0XHRhY3RpdmVDb250ZW50KG5leHQpO1xuXHRcdH1cblxuXHRcdC8vINCf0YDQtdC00YvQtNGD0YnQuNC5INGB0LvQsNC50LRcblx0XHRmdW5jdGlvbiBwcmV2U2xpZGUoKSB7XG5cdFx0XHR2YXIgcHJldiA9ICgkKHNsaWRlcikuZmluZCgnLmludHJvX19zbGlkZS5hY3RpdmUnKS5wcmV2KCkuZ2V0KDApID09PSB1bmRlZmluZWQpID8gJChzbGlkZXIpLmZpbmQoJy5pbnRyb19fc2xpZGUnKS5sYXN0KCkgOiAkKHNsaWRlcikuZmluZCgnLmludHJvX19zbGlkZS5hY3RpdmUnKS5wcmV2KCkuZ2V0KDApO1xuXHRcdFx0YWN0aXZlQ29udGVudChwcmV2KTtcblx0XHR9XG5cblx0XHQvLyDQl9Cw0LzQtdC90LAg0LrQvtC90YLQtdC90YLQsFxuXHRcdGZ1bmN0aW9uIGFjdGl2ZUNvbnRlbnQoc2xpZGUpIHtcblx0XHRcdHZhciBhY3RpdmUgPSAoc2xpZGUpID8gc2xpZGUgOiAkKHNsaWRlcikuZmluZCgnLmludHJvX19zbGlkZS5hY3RpdmUnKSxcblx0XHRcdFx0Y29udGVudFNsaWRlID0gJChhY3RpdmUpLmZpbmQoJy5pbnRyb19fc2xpZGUtY29udGVudCcpLmh0bWwoKSxcblx0XHRcdFx0Y29udGVudCA9ICQoc2xpZGVyKS5maW5kKCcuaW50cm9fX2NvbnRlbnQnKSxcblx0XHRcdFx0bGluayA9ICQoYWN0aXZlKS5kYXRhKCdsaW5rJyksXG5cdFx0XHRcdGFsdFNsaWRlID0gJChhY3RpdmUpLmZpbmQoJy5pbnRyb19fc2xpZGUtYWx0JykuaHRtbCgpLFxuXHRcdFx0XHRhbHQgPSAkKHNsaWRlcikuZmluZCgnLmludHJvX19hbHQnKTtcblxuXHRcdFx0JChzbGlkZXIpLmZpbmQoJy5pbnRyb19fc2xpZGUuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0JChhY3RpdmUpLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuXHRcdFx0JChjb250ZW50KS5hZGRDbGFzcygnY2hhbmdlJykuaHRtbChjb250ZW50U2xpZGUpO1xuXHRcdFx0JChzbGlkZXIpLmZpbmQoJy5pbnRyb19fbW9yZScpLmF0dHIoJ2hyZWYnLCBsaW5rKTtcblxuXHRcdFx0JChhbHQpLmFkZENsYXNzKCdjaGFuZ2UnKTtcblxuXHRcdFx0Y291bnQoKTtcblxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0JChhbHQpLnJlbW92ZUNsYXNzKCdjaGFuZ2UnKS5lbXB0eSgpLmFwcGVuZChhbHRTbGlkZSk7XG5cdFx0XHRcdHZhciBnYWxsZXJ5ID0gJChhbHQpLmZpbmQoJy5nYWxsZXJ5JykuZ2V0KDApO1xuXG5cdFx0XHRcdGlmIChnYWxsZXJ5KSB7XG5cdFx0XHRcdFx0JChnYWxsZXJ5KS5maW5kKCcuZ2FsbGVyeV9fc2xpZGVzJykuc2xpY2soe1xuXHRcdFx0XHRcdFx0aW5maW5pdGU6IHRydWUsXG5cdFx0XHRcdFx0XHRhdXRvcGxheTogMzAwMCxcblx0XHRcdFx0XHRcdHNsaWRlc1RvU2hvdzogMSxcblx0XHRcdFx0XHRcdGFycm93czogdHJ1ZSxcblx0XHRcdFx0XHRcdGZhZGU6IHRydWUsXG5cdFx0XHRcdFx0XHRwcmV2QXJyb3c6ICQoJy5jb250cm9sc19nYWxsZXJ5IC5jb250cm9sc19fYXJyb3dfcHJldicpLFxuXHRcdFx0XHRcdFx0bmV4dEFycm93OiAkKCcuY29udHJvbHNfZ2FsbGVyeSAuY29udHJvbHNfX2Fycm93X25leHQnKVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCA1MDApO1xuXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkKGNvbnRlbnQpLnJlbW92ZUNsYXNzKCdjaGFuZ2UnKTtcblx0XHRcdH0sIDMwMCk7XG5cdFx0fVxuXG5cdFx0JChzbGlkZXIpLmZpbmQoJy5pbnRyb19fc2xpZGUnKS5maXJzdCgpLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuXHRcdGFjdGl2ZUNvbnRlbnQoKTtcblxuXHRcdCQoc2xpZGVyKS5maW5kKCcuY29udHJvbHNfX2Fycm93Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgZGlyZWN0aW9uID0gJCh0aGlzKS5oYXNDbGFzcygnY29udHJvbHNfX2Fycm93X25leHQnKTtcblx0XHRcdFxuXHRcdFx0c3dpdGNoIChkaXJlY3Rpb24pIHtcblx0XHRcdFx0Y2FzZSB0cnVlOlxuXHRcdFx0XHRcdG5leHRTbGlkZSgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIGZhbHNlOlxuXHRcdFx0XHRcdHByZXZTbGlkZSgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH0pXG5cblx0XHRpZiAoYXV0b1BsYXlTbGlkZXMpIGF1dG9QbGF5KGF1dG9QbGF5U2xpZGVzU3BlZWQpO1xuXHR9XG5cblx0aW50cm9TbGlkZXIoe1xuXHRcdHNsaWRlcjogJCgnW2RhdGEtc2xpZGVyPVwiaW50cm9cIl0nKSxcblx0XHRhdXRvUGxheTogdHJ1ZSxcblx0XHRhdXRvUGxheVNwZWVkOiA1MDAwXG5cdH0pXG5cblx0aW50cm9TbGlkZXIoe1xuXHRcdHNsaWRlcjogJCgnW2RhdGEtc2xpZGVyPVwic3BlY2lhbGlzdHNcIl0nKVxuXHR9KVxuXG5cdGZ1bmN0aW9uIGJyYW5kc1NsaWRlcigpIHtcblx0XHRmdW5jdGlvbiByZWZyZXNoKCkge1xuXHRcdFx0dmFyIHNsaWRlcyA9ICQoJy5icmFuZHNfX2xpc3QnKS5jaGlsZHJlbigpLmxlbmd0aCsxLFxuXHRcdFx0XHRjdXJyZW50ID0gJCgnLmJyYW5kLnNsaWNrLWN1cnJlbnQnKSxcblx0XHRcdFx0aW5kZXggPSAkKGN1cnJlbnQpLmluZGV4KCkrMSxcblx0XHRcdFx0aW1nID0gJChjdXJyZW50KS5kYXRhKCdpbWFnZScpLFxuXHRcdFx0XHRpbWFnZSA9ICQoJy5icmFuZHNfX2ltYWdlJyk7XG5cblx0XHRcdGlmIChTdHJpbmcoc2xpZGVzKS5sZW5ndGggPT09IDEpIHNsaWRlcyA9ICcwJytzbGlkZXM7XG5cdFx0XHRpZiAoU3RyaW5nKGluZGV4KS5sZW5ndGggPT09IDEpIGluZGV4ID0gJzAnK2luZGV4O1xuXG5cdFx0XHQkKCcuYnJhbmRzX19jb3VudCBzcGFuJykuZmlyc3QoKS50ZXh0KGluZGV4KTtcblx0XHRcdCQoJy5icmFuZHNfX2NvdW50IHNwYW4nKS5sYXN0KCkudGV4dChzbGlkZXMpO1xuXG5cdFx0XHQkKGltYWdlKS5hZGRDbGFzcygnY2hhbmdlJyk7XG5cblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoaW1hZ2UpLmNzcyh7XG5cdFx0XHRcdFx0J2JhY2tncm91bmQtaW1hZ2UnOiAndXJsKCcraW1nKycpJ1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQkKGltYWdlKS5yZW1vdmVDbGFzcygnY2hhbmdlJyk7XG5cdFx0XHR9LCAxMDApXG5cdFx0fVxuXG5cdFx0JCgnLmJyYW5kc19fbGlzdCcpLnNsaWNrKHtcblx0XHRcdGluZmluaXRlOiB0cnVlLFxuXHRcdFx0ZmFkZTogdHJ1ZSxcblx0XHRcdGFycm93czogdHJ1ZSxcblx0XHRcdHByZXZBcnJvdzogJCgnLmNvbnRyb2xzX2JyYW5kcyAuY29udHJvbHNfX2Fycm93X3ByZXYnKSxcblx0XHRcdG5leHRBcnJvdzogJCgnLmNvbnRyb2xzX2JyYW5kcyAuY29udHJvbHNfX2Fycm93X25leHQnKVxuXHRcdH0pO1xuXHRcdFxuXHRcdCQoJy5jb250cm9sc19icmFuZHMgLmNvbnRyb2xzX19hcnJvdycpLm9uKCdjbGljaycsIHJlZnJlc2gpO1xuXG5cdFx0cmVmcmVzaCgpO1xuXHR9XG5cblx0YnJhbmRzU2xpZGVyKCk7XG5cblx0ZnVuY3Rpb24gZ2FsbGVyeSgpIHtcblx0XHQkKCcuZ2FsbGVyeScpLmVhY2goZnVuY3Rpb24oaSwgZ2FsbGVyeSkge1xuXHRcdFx0aWYgKCQoZ2FsbGVyeSkuaGFzQ2xhc3MoJ2dhbGxlcnlfc3BlYycpKSByZXR1cm47XG5cblx0XHRcdCQoZ2FsbGVyeSkuZmluZCgnLmdhbGxlcnlfX3NsaWRlcycpLnNsaWNrKHtcblx0XHRcdFx0aW5maW5pdGU6IHRydWUsXG5cdFx0XHRcdGF1dG9wbGF5OiAzMDAwLFxuXHRcdFx0XHRzbGlkZXNUb1Nob3c6IDEsXG5cdFx0XHRcdGFycm93czogdHJ1ZSxcblx0XHRcdFx0ZmFkZTogdHJ1ZSxcblx0XHRcdFx0cHJldkFycm93OiAkKCcuY29udHJvbHNfZ2FsbGVyeSAuY29udHJvbHNfX2Fycm93X3ByZXYnKSxcblx0XHRcdFx0bmV4dEFycm93OiAkKCcuY29udHJvbHNfZ2FsbGVyeSAuY29udHJvbHNfX2Fycm93X25leHQnKVxuXHRcdFx0fSk7XG5cblx0XHRcdGZ1bmN0aW9uIHRpdGxlU2V0dXAodGl0bGUpIHtcblx0XHRcdFx0dmFyIGRlbGF5ID0gMTUwO1xuXHRcdFx0XHRcblx0XHRcdFx0JCh0aXRsZXMpLmZhZGVPdXQoZGVsYXksIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCQodGhpcykuaHRtbCh0aXRsZSkuZmFkZUluKGRlbGF5KVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIHRpdGxlcyA9ICQoZ2FsbGVyeSkuZmluZCgnLmdhbGxlcnlfX3RpdGxlJykuZ2V0KDApO1xuXG5cdFx0XHRpZiAodGl0bGVzKSB7XG5cdFx0XHRcdHZhciB0aXRsZSA9ICQoZ2FsbGVyeSkuZmluZCgnLnNsaWNrLWN1cnJlbnQnKS5kYXRhKCd0aXRsZScpO1xuXHRcdFx0XHR0aXRsZVNldHVwKHRpdGxlKTtcblxuXHRcdFx0XHQkKGdhbGxlcnkpLmZpbmQoJy5nYWxsZXJ5X19zbGlkZXMnKS5vbignYmVmb3JlQ2hhbmdlJywgZnVuY3Rpb24oZSwgc2xpY2ssIGN1cnJlbnRTbGlkZSwgbmV4dFNsaWRlKSB7XG5cdFx0XHRcdFx0dmFyIGluZGV4ID0gbmV4dFNsaWRlLFxuXHRcdFx0XHRcdFx0c2xpZGUgPSAkKGdhbGxlcnkpLmZpbmQoJy5nYWxsZXJ5X19pdGVtJykuZ2V0KGluZGV4KSxcblx0XHRcdFx0XHRcdHRpdGxlID0gJChzbGlkZSkuZGF0YSgndGl0bGUnKTtcblxuXHRcdFx0XHRcdHRpdGxlU2V0dXAodGl0bGUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdH0pO1xuXHR9XG5cblx0Z2FsbGVyeSgpO1xuXG5cblx0Ly8g0J/RgNC+0YHRgtGL0LUg0YHQu9Cw0LnQtNC10YDRi1xuXHQkKCcuc2xpZGVyJykuZWFjaChmdW5jdGlvbihpLCBzbGlkZXIpIHtcblx0XHR2YXIgc2wgPSAkKHNsaWRlcikuZmluZCgnLnNsaWRlcl9fbGlzdCcpO1xuXG5cdFx0c2wuc2xpY2soe1xuXHRcdFx0dmFyaWFibGVXaWR0aDogdHJ1ZSxcblx0XHRcdGNlbnRlck1vZGU6IHRydWUsXG5cdFx0XHRhcnJvd3M6IHRydWUsXG5cdFx0XHRwcmV2QXJyb3c6ICQoc2xpZGVyKS5maW5kKCcuY29udHJvbHNfX2Fycm93X3ByZXYnKSxcblx0XHRcdG5leHRBcnJvdzogJChzbGlkZXIpLmZpbmQoJy5jb250cm9sc19fYXJyb3dfbmV4dCcpXG5cdFx0fSlcblxuXHRcdHZhciBiaWdJbWcgPSAkKHNsaWRlcikuZGF0YSgnYmlnaW1nJyk7XG5cblx0XHRpZiAoYmlnSW1nKSB7XG5cdFx0XHR2YXIgYmlnID0gJCgnLicrYmlnSW1nKS5nZXQoMCk7XG5cblx0XHRcdCQoYmlnKS5odG1sKCQoc2wpLmZpbmQoJy5zbGljay1jdXJyZW50IGltZycpLmNsb25lKCkpO1xuXG5cdFx0XHQkKHNsKS5vbignLnNsaWRlcl9faXRlbScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHRcdHZhciBpbWcgPSAkKHRoaXMpLmZpbmQoJ2ltZycpLmNsb25lKCk7XG5cblx0XHRcdFx0JChiaWcpLmVtcHR5KCkuaHRtbChpbWcpO1xuXHRcdFx0fSlcblx0XHR9XG5cdH0pO1xuXG5cdC8vIGJwb3B1cFxuXHQkKCdbZGF0YS1icG9wdXBdJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdHZhciBpbWcgPSAkKHRoaXMpLmZpbmQoJ2ltZycpLmNsb25lKCksXG5cdFx0XHRpbWdXcmFwID0gJzxkaXYgY2xhc3M9XCJicG9wdXAtd3JhcC1pbWFnZVwiPjwvZGl2Pic7XG5cblx0XHQkKCdib2R5JykuYXBwZW5kKGltZ1dyYXApO1xuXHRcdCQoaW1nV3JhcCkuYXBwZW5kKGltZykuYlBvcHVwKCkucmVwb3NpdGlvbigzMDApO1xuXHRcdFxuXG5cdH0pXG5cblx0Ly8g0JrQsNGA0YLQsFxuXHR2YXIgbWFwID0gJCgnI21hcCcpLmdldCgwKTtcblxuXHRpZiAobWFwKSB7XG5cdFx0eW1hcHMucmVhZHkoaW5pdCk7XG5cblx0ICAgIHZhciBteU1hcCwgXG5cdCAgICAgICAgbXlQbGFjZW1hcms7XG5cblx0ICAgIGZ1bmN0aW9uIGluaXQoKXsgXG5cdCAgICAgICAgbXlNYXAgPSBuZXcgeW1hcHMuTWFwKFwibWFwXCIsIHtcblx0ICAgICAgICAgICAgY2VudGVyOiBbNTMuMzM0MTM2LCA4My43OTMyNDddLFxuXHQgICAgICAgICAgICB6b29tOiAxNyxcblx0ICAgICAgICAgICAgY29udHJvbHM6IFtdXG5cdCAgICAgICAgfSk7IFxuXHQgICAgICAgIFxuXHQgICAgICAgIG15UGxhY2VtYXJrID0gbmV3IHltYXBzLlBsYWNlbWFyayhbNTMuMzM0MTM2LCA4My43OTMyNDddLCB7XG5cdCAgICAgICAgICAgIGhpbnRDb250ZW50OiAn0KLQlCBVbHRyYSdcblx0ICAgICAgICB9KTtcblx0ICAgICAgICBcblx0ICAgICAgICBteU1hcC5nZW9PYmplY3RzLmFkZChteVBsYWNlbWFyayk7XG5cdCAgICB9XG5cdH1cblxuXHQvLyDQmtGA0LDRgdC40LLRi9C1INGB0LXQu9C10LrRgtGLXG5cdCQoJ3NlbGVjdCcpLm5pY2VTZWxlY3QoKTtcblxuXHQvLyDQnNC+0LHQuNC70YzQvdC+0LUg0LzQtdC90Y5cblx0JCgnLm1lbnUnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHQkKHRoaXMpLnBhcmVudCgpLnRvZ2dsZUNsYXNzKCdtZW51LW9wZW4nKTtcblx0fSk7XG5cblx0Ly8g0JzQvtC00LDQu9GM0L3Ri9C1INC+0LrQvdCwXG5cdCQoJ1tkYXRhLW9wZW5dJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdHZhciBtb2RhbCA9ICQoJ1tkYXRhLW1vZGFsPVwiJyskKHRoaXMpLmRhdGEoJ29wZW4nKSsnXCJdJykuZ2V0KDApO1xuXG5cdFx0JChtb2RhbCkuYlBvcHVwKHtcblx0XHRcdGNsb3NlQ2xhc3M6ICdtb2RhbF9fY2xvc2UnXG5cdFx0fSk7XG5cdH0pO1xuXG5cdC8vINCf0L7QuNGB0Lpcblx0c2VhcmNoQ29tcG9uZW50KCk7XG5cblx0ZnVuY3Rpb24gc2VhcmNoQ29tcG9uZW50KCkge1xuXHRcdHZhciBzZWFyY2ggPSAkKCcuc2VhcmNoJyk7XG5cblx0XHQkKCcuc2VhcmNoX19idG4nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDc2OCkgcmV0dXJuO1xuXG5cdFx0XHQkKHNlYXJjaCkudG9nZ2xlQ2xhc3MoJ3NlYXJjaC1vcGVuJyk7XG5cdFx0XHQkKHNlYXJjaCkuZmluZCgnaW5wdXQnKS5mb2N1cygpO1xuXHRcdH0pO1xuXG5cdFx0JCgnLnNlYXJjaF9fY2xlYXInKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdCQoc2VhcmNoKS5maW5kKCcuc2VhcmNoX19maWVsZCBpbnB1dCcpLnZhbCgnJykuZm9jdXMoKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vINCh0YDQsNCy0L3QtdC90LjQtVxuXHQkKCcucmVzdWx0X19jb21wYXJlJykudHdlbnR5dHdlbnR5KHtcblx0XHRiZWZvcmVfbGFiZWw6ICfQlNC+Jyxcblx0XHRhZnRlcl9sYWJlbDogJ9Cf0L7RgdC70LUnXG5cdH0pO1xuXG5cdC8vIHRpbHQganNcblx0JCgnLnNlcnRpZmljYXRlJykudGlsdCgpO1xuXG59KTsiXX0=
